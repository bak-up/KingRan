/*
活动名称：京东跨年狂欢助力20红包
环境变量：JD_PARTY_INVITE_CODE // 指定助力码

自行控制助力上限

请自己查看是否已满助力，只有助力功能，其他啥都没

号多请自行使用desi JD_COOKIE 控制

cron: 7 7 7 7 * jd_newYear_party_invite.js

*/

const $ = new Env('京东跨年狂欢助力20红包')
var iｉl='jsjiami.com.v7';function Iii11l(){const i1iIlI=(function(){return[...[iｉl,'IDXQjAWsjiuahnymqil.pctohMmbR.PEGvn7GnEn==','wr3cUqCT','gmojW6rEpCo+','W4DAzhuqta','qghcKSkG','oCoZW794fa','W7/cGSovbMdcPxpcJCoUhW','W4BdISkMW7FdKeK','WOfnWPJdHv8','rSoQB8kyW43cJmo3W7e','qHrTWOVdMXOyo3NdNmoC','WQX9mSkVvW','W7n0WOi','e+ocPEw5OUMtHUwDJ+wEI+oaHa0JWQTIAWZcVSkLWQxdMbq1v1BdIL3cSSorWOldG8kWoqdcMvrbW5WfWPpcOq','ArRcIW','oSowW70y','aSoBr8oP','WPLkWQddHwK','B2xcQCoOtqPM','B8kaWQbrWPZcH0LSw0K','ESkUfq','WPlcKqxcS8o2WQyv','pmo/W4vupa','kmkgW4qptSkfFqm9WP5W','WPtdHrBcJ8o/','DvpcJCowea','amo/WOXllW','kHr/','5PsT5zoK5BQn5Pw25O2t','y8oxrSkmea','omkOzmoe','bmkqWRe','WRBLKkhLUlCTE8kKsCocWRDeW4u','WPBdGrrTzq','wrn9WOxdOtGAmq','uSoME8kXW5VcMq','8lcwMbq','i8knWO85aa','hCoOW4rQgq','W5tcLSoyW7S','pKhdGq0OWQSgWOXV','fCoBxSoTWO4gWR7cSdCPWPO','BCkCWRZcVGafWO97iG','4PYiyUACO+IdQ+AVS+EGNEwMQoErINi','mfOXW4S','WPP5W77dNuy','v1lcLSo2xG','WPNdLdpcUCoN','WRHPW7FdVxJcK8k7W4tcGtNcUq','WQ3ORjNMS6lLPQpOTOVVVP7cGmor6koK6zIU5yUc77+RBCkJtmoMv8oHDCoGovC9W5CkWRS','vSoMB8kDW4tcKSoh','n8kAWPnjeCkOyqW4WRe9A1pdV8oUWPZdTduQdvlcGK4','W6aGyW','AXlcHZ8','WQLgWP3dMu4ixCkdW7eM','gddcMCochmo0rmo+wCk9WRhcUCkhlCoXW6BcQh/cV8kf','fsdcOSkOW6C','w1jvt8kmgCo0zcRcJWLE','W40YW67dUmoBWOhdTa18eCo1','wGdcLIWVWR8HWP4','8yQeTCkr','W5VdMKdcOSoNW6ldTCk/WQPIzZ1sDa','WRZdRWq','WRTZW77dMxJcGa','44gw5O6D56EX44o66k2N5yw86i+a5y6hDSoHCZhdJCk6','mSokW4NdGfxdSSkr','W6lcH8ogf3W','5PEw5zoA5BMH5PEj5O+C','WRFdPq3cU8ou','W43dTrRcJvC','W73cJ8osW6hdIW','raPSWOFdGt4OpcC','cGKEnCowrCo+','WRL9W5y','gSouW40L','W5m3WQNcUsBdISoZWO3dOMhdUCkuruPxW6HLWQSeW7bLW7b2WP7dVHdcJSk4kSkzuSktvrRcIWtcMmoGuCozaapcLJhdNc9MovTfWPv3sW','d8oGW6NdPW','W51unCkqlb0','jJfExmoH','nCoCW6OsWOFcMuO','rwVcJCoEhmoWwCoXtW','bCoXCSo8W6y','w00FWOBdMG','AoAnUowpTowrOEw4HoAuTUAnPoIKR+AFPUwNNUI2SCkKWPS','W5LxEhy4tYm','W65tWOhcO2C','WQxdNSksvIhdUf/cO8oHgCkZWR4','WPhOR4BMSjNPHRRNVlBLJRFMLRhPLQBOR7RVV5xORAZOGkNNS6NLVz7LJRtOG6NOV6BOO5xLJ6RPPjVVVPvRW5yDWRRcG2e8W59QWQbOc8oaW68','otfBW5BcRcZdICoQz1ddHa','sdBcPW','W4L2WQddL8kMnCoFuWtdG8oLmG','WQLgWO/dLui','WOygA8kJmdZcQ8oUyW','WPdcGdVcQCoh','WQfBu8ousmohW4RdVeFdLmokkfxcS8kFtmox','WR/OR6ZMSQFLP6xOTlRVV4iIWORdJSk0W4lcNIKKp8obW6pcPSonW40','kSk0BCoVW78IBW','x3NcLSovW4FdJL8f','jctcSCkMW6nt','WRPMW7ZdGde','WRH3W4ldMGbzW6G'],...(function(){return[...['pSoXW7PTpq','WQ1NW5hcQc7cTKpcK8kiWRJcNq','imkhW4yjsmo4tZagWR1vCG','dSkwWQ4','W6q7CbFdOt8qWOxdM8k7W4HLa3tcQCktoHFdKeKRo8o5','mCoxW70eWP4','rwpcH8oqW5ZdJq','W5ldNba','ySooWPxdVGG','yGL7WPZdOtGAmq','W4CKW6tdOG','W7H+WPhcHNRcUqdcGmotWRFdImkZns50W4VdQq','pCoBW7FcSaqyWRj+nSolW5i','uXvWWOS','xSksWRK','jfq2W54','WR/dUZbcta','WPzhymotcG','W4BcL8o+W4nC','fSobWR1Ola','W5JdMHVcJx/cGW','4PYYiowjKUwjJ+AlU+wlTCoZW6i','tSkkjfBdRa','WPXsW48','W5/dHCkIW7/dIv/cPmkjjLi','l8oxWQfXk8k6rG','aSozW6T/nSoOjW','v3ldRSkcaW','jLW6','zwCzWPBdVaxdHa','W53dJ0tcJCoHW67dV8kIWQzBAh5Fpmo3rtf2W5TUCvythSoEWQBcKxFdI8kSW4JdUmkA','Fxa6i8kNqmo2gqpcRfW3','W5pcGmoPW4DX','W7ZdH8k6W6ldLq','WQ1jWPS','W6xcU8ozoNO','WO/dMGLVBG','qtFcNW0f','W6OmW4JdS8oM','WQbmANvCmCkt','yGdcLa','bmotsCofW5ao','nSoEWQ7dNIK4WOu','A27cRmoYwaHaDMJdHW','WO9Gs8ovca','ASoPWRVdJG','cSovva','WPpcMXe','c8opW7LYimoUmCk/hCoeFG','ESoAWPTAfSkS','nUwqJow7PK/dSWalvCoDzWevvW','dSoor8o4W5btW6pdTIaYWPVdN8kdW590W6ymWR/dU8kj','W4lcOCojW5XE','W4GtFmoNkLP/5BYI5AE644gq5lQF5lMr6lsp5y+F','zmkKaxNdSbS','x3hcNmoBb8oZvCoK','W4VdNL3cLq','mmohW6m','W6BcRSoEW6v6','a8otW7K','AeRdKq','W63cPuW5ef/cTSkWW5xdQmoe','xmojw8kTW7K','fUIVOoAYT+wMIoI2L8kkb0JdRG','W4rDEhe','WP1FW51pW54','zfSmWRFdKW','isLct8o4','W55Scf1gW5dcPmo7o8kLCXJcKeL0W5RdNSkYdCorW4nbwCojW7XM','W7PTWPhdICkB','wgqWWPldSW','W5ZcKCoVW4bd','ENRcR8ocqq','eCklkCooxvu','WOddJZdcUG','cGKEo8okrG','W6nRbLrCW4hcTCkO','W70XW6/dMSoY','kmonW5GcWQK','4PYZp+wjLUwiRoAjOUwiIbddJa','6i6H5yYx5yUB5yQx56kD7721','W5xdHmk6W6ldMftcKW','W5tdMxxcSmoA','W7uxcmkCxCkUW4/dLK3dJmor','W4BcHCouW7RdUW','WRfUW7ddPhJdNCoXWO/cVZ7cU8kxbuKqWQfMW6vgWRbNWRa6W5/cVXldGSo2C8oDcCoBvWxdKx/dLSk1e8kasuVdRvVcHvSXzX4yW5zUjKhdKePKWQyQW4L/W4pcP8k/mCoRqrzhW7/cL10','W47dHKtcK8oEWRq6Amks','8jk6TmoF','W7RcG8oe','W47dKGxcJwpcRNXyqSojWRqL','eoITUoAXG+wNJEI2JE+/TSoSW7ddHfpcSCoSb17dJ8khEJuRW6S','cSkwWQW5c8kd','W6DHWPdcJxi','d8oCESo8W4K','uxlcGq','WO3cKqxcTCo7WRu','W4ZdLGtcJhBcHq','8jkRKt4','ntNcUCkcW75thJDm','WQ3ORjNMS6lLPQpOTOVcSSo0WR9V','kc1U','W6SKtbldPa'],...(function(){return['WQnzu8oq','W6hcGCoh','dsX1jCkf','ywWCWOZdQqFdOSoJAxq','mConW7FcQHylWRi','ChxcTmoEqGK','5lQB5PEd5O6I55UR6k+J5Rkc5PAj5Rc3','W6pcVmo/W6CUo10','WPnZDSojfG','bZHkFmou','q2FcKCoyW4BdJ3KzWQddLNewW4O','6iY65yY45yIj5yIj56kV776i','W6/cH8oAW5/dNCo1','WQRdMtLMsW','DCoSBmkzcG','W6edxtpdHG','Bw8AWPhdPa','nUISTUAWSowtGEw4Ie8','WRFdR8k5WPCIauHdjSk6Cq','W5WGW6/dPCorWQRdUaDedCoSda','BSkFWORcHG3dMCk+W4BdGqyx','W7NcQCocW6pdHW','u3NcGW','adFdI8kaWOmJWRNdQmo2','WOTvEmoUfq','W4vSm0Xh','hmoZv8ohW6i','ictcSW','DCoAWPi','EZRcLq0p','lUITV+AYJEMhOUE8T+woQoAwK+MwOoITVE+9OUITLoIcPEEZTow9GUwpOUIdOoI+LEIGTEwpQUMLNE+8HCk/iXhcOCokWOr1WP/dVJpdISo/W5nJ','BahcLJ8vWRS','u8oAs8kWW5W','l3mdW7lcVW','WPFdHtC','W6GRWRFcOJ3dLmktW6pcIaFcNCoG','wXv5','zCk1e3JdQrWJu8oCiG','tSoIWRz3oq','zH3cLZSz','WR7dUHnGthlcKG','W7j+WPBcP37cRru','xCoQCSkpW4NcMCoB','W5ldU1dcG8oF','dmovW7i','p8k5W7ZcMw9zWQ7dUSovjCoQWQG','yXZcLa','W6XKWRFdKCkrc8otrq','8y+uJ8ol','W7eyW5pdV3qGr8kVW6q','nb5Rp8k6WO0','W6JcTSoS','r8o/FSkgea','W71YWP/cMwZcRq','bX5mimkC','l8o7W63cSdW','WRVdPqBcNSk4imkoh0Cf','WQvDBxzoBmozAmomumoKW7ejAK0dW5e6WRRdH8oijmob','kYJcUmkyW7fteG','W67cGCosW6e','W5v4WRu','6lwm5y2l5PwQ5Pwt','WP4yis9ZaKW','WQX0W6xdObG','W6FcN8oHW6vX','WR7dVazbwNq','W5RdLKW','C8o2CSkFna','vHhcUcSY','WQ5jWOBdLq','rUITJEAXSEI0JEAvLE+9PEISU+AGMEAETEE8KEE4QoMeVoISUW','sMBdNmkpja','xSo/WRDwdq','W5ZcRmoKW7JdGW','4PYiyUACO+EFS+ITP+AWSCkm','WQn5W7FdVf8','wNJcKG','WQDnWP/dVv8EBCknW7iM','WPzuW5a','zXVcKHie','FJxcTYGP','WRTXj8kKtq','W5xdKulcImo8W6JdNCk5WQTr','WQDssConf8ktW4VdVw/dJCog','jCk4zmoFW7eHBW','eoAmQUwpOUwqSEw4VoAwJUApKoILTUACP+wKKUI3U8k4va','xmoGzG','DSkwW78uWOJcNvTIxuhdOSopr0ddNSkiaGZcJW','WPDEW4roW5pdOCo+','WQ/dOq5Lr3tcLCkHW7y','xM7cJCk9WP8pWPddLSoKW7u','mfqWW4VcV8k7WOT4WR/dUYhcQq','W6dOR5/MSQNLJBlMLyO','EmogWOzvdmk/CaezWQP/','uh7cJq','nmowW74','kX5RoCk3WP4D','WOPvW5FdMg0','WRhdSa9/shtcMq'];}())];}())];}());Iii11l=function(){return i1iIlI;};return Iii11l();};const i1iIil=iii1II;function iii1II(_0x14ac24,_0x4d680c){const _0x2f536d=Iii11l();return iii1II=function(_0x383e42,_0x406372){_0x383e42=_0x383e42-0x104;let _0x174308=_0x2f536d[_0x383e42];if(iii1II['szpcrA']===undefined){var _0x5a4c08=function(_0x4c48a1){const _0x2e26ba='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x923250='',_0x1f856d='';for(let _0x1aa0b3=0x0,_0x1db27c,_0x2ebd9b,_0x3c9c1d=0x0;_0x2ebd9b=_0x4c48a1['charAt'](_0x3c9c1d++);~_0x2ebd9b&&(_0x1db27c=_0x1aa0b3%0x4?_0x1db27c*0x40+_0x2ebd9b:_0x2ebd9b,_0x1aa0b3++%0x4)?_0x923250+=String['fromCharCode'](0xff&_0x1db27c>>(-0x2*_0x1aa0b3&0x6)):0x0){_0x2ebd9b=_0x2e26ba['indexOf'](_0x2ebd9b);}for(let _0x4986b7=0x0,_0x318101=_0x923250['length'];_0x4986b7<_0x318101;_0x4986b7++){_0x1f856d+='%'+('00'+_0x923250['charCodeAt'](_0x4986b7)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1f856d);};const _0x22426f=function(_0x551a4d,_0x5940d7){let _0x31736c=[],_0x11efd2=0x0,_0x570b33,_0x26b9f4='';_0x551a4d=_0x5a4c08(_0x551a4d);let _0x3dbd53;for(_0x3dbd53=0x0;_0x3dbd53<0x100;_0x3dbd53++){_0x31736c[_0x3dbd53]=_0x3dbd53;}for(_0x3dbd53=0x0;_0x3dbd53<0x100;_0x3dbd53++){_0x11efd2=(_0x11efd2+_0x31736c[_0x3dbd53]+_0x5940d7['charCodeAt'](_0x3dbd53%_0x5940d7['length']))%0x100,_0x570b33=_0x31736c[_0x3dbd53],_0x31736c[_0x3dbd53]=_0x31736c[_0x11efd2],_0x31736c[_0x11efd2]=_0x570b33;}_0x3dbd53=0x0,_0x11efd2=0x0;for(let _0x202cb7=0x0;_0x202cb7<_0x551a4d['length'];_0x202cb7++){_0x3dbd53=(_0x3dbd53+0x1)%0x100,_0x11efd2=(_0x11efd2+_0x31736c[_0x3dbd53])%0x100,_0x570b33=_0x31736c[_0x3dbd53],_0x31736c[_0x3dbd53]=_0x31736c[_0x11efd2],_0x31736c[_0x11efd2]=_0x570b33,_0x26b9f4+=String['fromCharCode'](_0x551a4d['charCodeAt'](_0x202cb7)^_0x31736c[(_0x31736c[_0x3dbd53]+_0x31736c[_0x11efd2])%0x100]);}return _0x26b9f4;};iii1II['qkBHlc']=_0x22426f,_0x14ac24=arguments,iii1II['szpcrA']=!![];}const _0x4b7569=_0x2f536d[0x0],_0x112c9c=_0x383e42+_0x4b7569,_0x4800df=_0x14ac24[_0x112c9c];return!_0x4800df?(iii1II['XBvztM']===undefined&&(iii1II['XBvztM']=!![]),_0x174308=iii1II['qkBHlc'](_0x174308,_0x406372),_0x14ac24[_0x112c9c]=_0x174308):_0x174308=_0x4800df,_0x174308;},iii1II(_0x14ac24,_0x4d680c);}(function(iliIiI,II11iI,Il1i1l,Iil1ii,lill1I,Ii1ii1,Ilil11){return iliIiI=iliIiI>>0x8,Ii1ii1='hs',Ilil11='hs',function(i1ii1,il1ii,llI111,i1iIiI,IlllI1){const i1iIii=iii1II;i1iIiI='tfi',Ii1ii1=i1iIiI+Ii1ii1,IlllI1='up',Ilil11+=IlllI1,Ii1ii1=llI111(Ii1ii1),Ilil11=llI111(Ilil11),llI111=0x0;const I1il11=i1ii1();while(!![]&&--Iil1ii+il1ii){try{i1iIiI=-parseInt(i1iIii(0x13a,'InUl'))/0x1+-parseInt(i1iIii(0x1a1,'Rbo['))/0x2*(-parseInt(i1iIii(0x12b,'V8sN'))/0x3)+-parseInt(i1iIii(0x1a3,'rjaU'))/0x4*(parseInt(i1iIii(0x18c,'P%bu'))/0x5)+-parseInt(i1iIii(0x1f7,'AUrb'))/0x6*(-parseInt(i1iIii(0x1fd,'K*ZC'))/0x7)+parseInt(i1iIii(0x208,'2!lN'))/0x8*(-parseInt(i1iIii(0x1d1,'qwbw'))/0x9)+parseInt(i1iIii(0x1d5,'UCYu'))/0xa*(-parseInt(i1iIii(0x104,'KEuz'))/0xb)+parseInt(i1iIii(0x148,'6fL['))/0xc*(parseInt(i1iIii(0x1b2,'Wzdi'))/0xd);}catch(lI1l11){i1iIiI=llI111;}finally{IlllI1=I1il11[Ii1ii1]();if(iliIiI<=Iil1ii)llI111?lill1I?i1iIiI=IlllI1:lill1I=IlllI1:llI111=IlllI1;else{if(llI111==lill1I['replace'](/[IGDXQytpAPWRhlubEqMn=]/g,'')){if(i1iIiI===il1ii){I1il11['un'+Ii1ii1](IlllI1);break;}I1il11[Ilil11](IlllI1);}}}}}(Il1i1l,II11iI,function(II11l,II11i,iI1Iii,liI1ii,lIIiIl,iI1Iil,il1iI){return II11i='\x73\x70\x6c\x69\x74',II11l=arguments[0x0],II11l=II11l[II11i](''),iI1Iii=`\x72\x65\x76\x65\x72\x73\x65`,II11l=II11l[iI1Iii]('\x76'),liI1ii=`\x6a\x6f\x69\x6e`,(0x14db9c,II11l[liI1ii](''));});}(0xc500,0x20017,Iii11l,0xc7),Iii11l)&&(iｉl=0x398e);const IIIII1=require('./jdCookie'),I1lIlI=require(i1iIil(0x1ac,'AUrb')),ii1ill=require(i1iIil(0x16e,'P%bu')),II1iI=require(i1iIil(0x1b0,'QG5t')),llI1II=![];$[i1iIil(0x171,'iPzw')]=process[i1iIil(0x12d,'8FT)')]['JD_PARTY_INVITE_CODE']||'';let lIli1l='';const lillIi=Object[i1iIil(0x1e8,'R1Lb')](IIIII1)[i1iIil(0x200,'6fL[')](i1l1iI=>IIIII1[i1l1iI])[i1iIil(0x1f2,'IY3M')](liil1l=>liil1l);!lillIi[0x0]&&($[i1iIil(0x206,'Rbo[')]($['name'],i1iIil(0x1b9,'btZC')),process[i1iIil(0x117,'KEuz')](0x1));!(async()=>{const liI1il=i1iIil,lI1lii={'DEuaj':function(Iiili1,Iil1l1){return Iiili1(Iil1l1);},'SOSLf':function(i1i11I,il1iIl){return i1i11I<il1iIl;},'NDlSd':function(iii1ii,il1iIi){return iii1ii===il1iIi;},'bsWJq':liI1il(0x1f4,'T6pK'),'XycQP':function(iii1il,II11li){return iii1il+II11li;},'mLYTT':'pt_pin','IKIgL':function(I1l11i){return I1l11i();}};$[liI1il(0x1b3,'R1Lb')]=0x0,I1lIlI[liI1il(0x20f,'AUrb')]({'title':$[liI1il(0x15c,'6fL[')]});for(let iIIiiI=0x0;lI1lii[liI1il(0x178,'InUl')](iIIiiI,lillIi[liI1il(0x1c6,'UCYu')]);iIIiiI++){if(lI1lii['NDlSd'](lI1lii[liI1il(0x1c7,'K*ZC')],lI1lii['bsWJq'])){$[liI1il(0x1d4,'6fL[')]=lI1lii['XycQP'](iIIiiI,0x1),lIli1l=lillIi[iIIiiI],ii1ill['setCookie'](lIli1l),$[liI1il(0x146,'$6A!')]=lI1lii[liI1il(0x15e,'8CX$')](decodeURIComponent,ii1ill[liI1il(0x1b6,'rx@4')](lIli1l,lI1lii[liI1il(0x126,'m[]8')])),$['UA']=ii1ill[liI1il(0x1bd,'4Wcb')]($[liI1il(0x1b4,'Rbo[')]),$[liI1il(0x1cd,'bCJp')]=I1lIlI[liI1il(0x136,'Rbo[')]($[liI1il(0x13e,'Rbo[')],$[liI1il(0x1e7,'xJk^')]),$['nickName']='',console[liI1il(0x14a,'iD&$')](liI1il(0x213,'TOZ*')+$[liI1il(0x1e3,'P%bu')]+'】'+($[liI1il(0x19b,'xJk^')]||$['UserName'])+liI1il(0x155,'bCJp')),await lI1lii['IKIgL'](illIi1),ii1ill[liI1il(0x183,'xJk^')]();if($[liI1il(0x17b,'inJk')])break;await $['wait'](0x3e8);}else II1ll1[liI1il(0x1dd,'NjBQ')][liI1il(0x1f5,'EM9z')](IlI1Ii);}llI1II&&I1lIlI[liI1il(0x164,'6fL[')]()&&(lI1lii[liI1il(0x203,'Rbo[')](liI1il(0x22c,'$Css'),liI1il(0x130,'jGf('))?lllii1[liI1il(0x21e,'bCJp')](liIli,(lilIIl,ililIl,liiI1l)=>{const llIlIi=liI1il;lI1lii[llIlIi(0x191,'4Wcb')](IilIi1,{'err':lilIIl,'res':ililIl,'data':liiI1l});}):(I1lIlI[liI1il(0x121,'8FT)')](I1lIlI[liI1il(0x22f,'m#qx')]+(liI1il(0x186,'AUrb')+$[liI1il(0x17c,'bCJp')]+'&venderId='+$[liI1il(0x182,'VR&p')])),await I1lIlI[liI1il(0x197,'c266')]()));})()['catch'](i1l1II=>$['logErr'](i1l1II))[i1iIil(0x1ab,'VR&p')](()=>$[i1iIil(0x1eb,'xJk^')]());async function illIi1(){const llIlIl=i1iIil,i1ill={'yfTIy':function(lilIIi,i1l1Il){return lilIIi===i1l1Il;},'EurGW':llIlIl(0x13f,'0lov'),'UYEgz':function(llIli,i1i11l){return llIli===i1i11l;},'PfZwn':function(i1i11i,II11l1){return i1i11i(II11l1);},'cFjJj':llIlIl(0x12a,'R1Lb'),'DNZGX':'party_assist'},I1l11l=await ii1ill['getLoginStatus'](lIli1l);if(!I1l11l&&i1ill[llIlIl(0x156,'NjBQ')](typeof I1l11l,i1ill['EurGW'])){console[llIlIl(0x176,'P%bu')](llIlIl(0x154,'inJk'));return;}try{i1ill['UYEgz']('sWzUn',llIlIl(0x201,'^VIJ'))?!$[llIlIl(0x1f6,'m#qx')]?(await i1ill[llIlIl(0x1ef,'KEuz')](liil1i,i1ill[llIlIl(0x157,'iD&$')]),await $[llIlIl(0x17d,'iPzw')](0x1388)):(await i1ill[llIlIl(0x224,'qwbw')](liil1i,i1ill['DNZGX']),await $['wait'](0x1388)):(lIIilI['assistedNum']+=0x1,II1li1[llIlIl(0x118,'n]bS')](llIlIl(0x1f3,'iPzw')+l1lIlI[llIlIl(0x1ea,'rjaU')]+']'));}catch(IiiliI){console['log'](IiiliI[llIlIl(0x205,'hGLP')]);}}async function ii1ili(iii1iI,llIll){const II11I=i1iIil,il1iII={'ntfbL':'\x0a---------------------------------------------------\x0a','zsjyY':function(iilli,IlllIl){return iilli||IlllIl;},'yqcHV':function(II11lI,lI1IIi){return II11lI||lI1IIi;},'lFZQQ':function(I1l11I,Ilil1l){return I1l11I===Ilil1l;},'FkSPx':function(iIIiii,iilll){return iIIiii===iilll;},'pgWVW':'cfzoJ','OvWZJ':'party_assist','FMUbN':function(il1iI1,IlllIi){return il1iI1===IlllIi;},'fKoZo':function(iIIiil,i1l1Ii){return iIIiil!==i1l1Ii;},'DYqUY':function(I1iIIi,I1iIIl){return I1iIIi===I1iIIl;},'ekKYh':II11I(0x105,'n]bS'),'cKAtE':II11I(0x1de,'inJk'),'tIfSn':function(lI1IIl,i1ilI){return lI1IIl!==i1ilI;},'sFmtM':II11I(0x1f9,'8CX$'),'vLEjb':II11I(0x131,'VgdZ'),'jLUsm':function(iii1lI,i1ilI1){return iii1lI!==i1ilI1;},'WfNDC':II11I(0x1dc,'NjBQ')};try{switch(iii1iI){case II11I(0x172,'X4u]'):if(il1iII['FkSPx'](llIll['code'],0x0)&&llIll[II11I(0x20b,'2!lN')]){const Iiilii=llIll?.[II11I(0x1ae,'Rbo[')];if(Iiilii['bizCode']===0x0&&Iiilii[II11I(0x214,'T6pK')])$[II11I(0x209,'2PcJ')]=Iiilii[II11I(0x110,'uZOP')][II11I(0x17f,'^VIJ')],console[II11I(0x198,'bVK9')](II11I(0x122,'n]bS')+$[II11I(0x11a,'qwbw')]);else Iiilii[II11I(0x158,'0lov')]?(console[II11I(0x185,'BxO)')](Iiilii[II11I(0x229,'Wzdi')]),$['message'][II11I(0x187,'Rbo[')](Iiilii[II11I(0x14c,'BxO)')])):console[II11I(0x217,'rjaU')]('❓'+iii1iI+'\x20'+JSON[II11I(0x113,'btZC')](llIll));}else llIll[II11I(0x1ba,'V8sN')]?il1iII['pgWVW']!=='cfzoJ'?IilliI['log']('❓'+IlI1ii+'\x20'+lIIiii['stringify'](iI1lli)):(console[II11I(0x115,'K*ZC')](llIll[II11I(0x18b,'2PcJ')]),$[II11I(0x177,'lkQX')]['fix'](llIll['message'])):console[II11I(0x16d,'VR&p')]('❓'+iii1iI+'\x20'+JSON['stringify'](llIll));break;case il1iII['OvWZJ']:if(il1iII[II11I(0x204,'R1Lb')](llIll['code'],0x0)&&llIll[II11I(0x189,'VgdZ')]){if(il1iII['fKoZo'](II11I(0x125,'Qt4K'),II11I(0x162,'InUl'))){const Iiilil=llIll?.['data'];if(il1iII['DYqUY'](Iiilil['bizCode'],0x0)&&Iiilil['result'])$[II11I(0x174,'AUrb')]+=0x1,console[II11I(0x1e5,'IY3M')]('✅\x20助力成功\x20['+$[II11I(0x20e,'inJk')]+']');else Iiilil[II11I(0x19c,'VR&p')]?il1iII[II11I(0x221,'K*ZC')]!==il1iII[II11I(0x1ca,'VgdZ')]?(console[II11I(0x18d,'T6pK')]('❌\x20'+Iiilil[II11I(0x10c,'bVK9')]),$[II11I(0x151,'btZC')][II11I(0x21a,'8CX$')](Iiilil['bizMsg'])):(IilIl1[II11I(0x185,'BxO)')](il1iII['ntfbL']),lIII1l['log'](II11I(0x19d,'rx@4')+l1iIIi+II11I(0x199,'^VIJ')+il1iII['zsjyY'](lilIi,'无')+'\x0a'),l1l11I[II11I(0x176,'P%bu')](II11I(0x147,'6fL[')+lilIl+II11I(0x210,'T6pK')+il1iII['yqcHV'](IilIlI,'无')+'\x0a'),iIli11['log']('🔧\x20'+Iiiil+II11I(0x173,'6fL[')),Iiiii[II11I(0x13b,'xJk^')](l11i1I),IiII[II11I(0x153,'$6A!')]('\x0a---------------------------------------------------\x0a')):il1iII[II11I(0x134,'Rbo[')](il1iII[II11I(0x1be,'IY3M')],il1iII[II11I(0x124,'0lov')])?console['log']('❓'+iii1iI+'\x20'+JSON['stringify'](llIll)):I1ilII=I11iIl+II11I(0x21d,'8FT)')+(l1l11l[II11I(0x140,'BxO)')]||IilIil);}else{const IIliIi=i1illi?.[II11I(0x1ed,'X4u]')];if(il1iII[II11I(0x1e6,'2!lN')](IIliIi[II11I(0x1c1,'Wzdi')],0x0)&&IIliIi['result'])iIIl1I[II11I(0x1a9,'InUl')]+=0x1,I1iIli['log'](II11I(0x22d,'QG5t')+lI1Ill[II11I(0x16a,'KEuz')]+']');else IIliIi[II11I(0x207,'VgdZ')]?(lI1Ili[II11I(0x20c,'VgdZ')]('❌\x20'+IIliIi['bizMsg']),IliilI['message'][II11I(0x143,'inJk')](IIliIi['bizMsg'])):i1II1[II11I(0x133,'AUrb')]('❓'+iIIl11+'\x20'+l1l1I1[II11I(0x1c9,'QG5t')](I1iIll));}}else llIll[II11I(0x141,'VR&p')]?il1iII['jLUsm'](II11I(0x1d6,'uZOP'),il1iII['WfNDC'])?Iiii1=lIIili+II11I(0x1d0,'UCYu')+IiiIil+'）':(console[II11I(0x115,'K*ZC')]('❌\x20'+llIll[II11I(0x179,'0lov')]),$['message'][II11I(0x1e1,'bVK9')](llIll['message'])):il1iII[II11I(0x21c,'VR&p')](II11I(0x12f,'KEuz'),'MtBJq')?console[II11I(0x20c,'VgdZ')]('❓'+iii1iI+'\x20'+JSON[II11I(0x170,'0lov')](llIll)):I1lll1[II11I(0x133,'AUrb')]('❓'+i1IIi+'\x20'+IIII1I['stringify'](Iii111));break;}}catch(I1l111){console[II11I(0x1b7,'4Wcb')](II11I(0x1a4,'K*ZC')+iii1iI+'\x20请求响应\x20'+(I1l111[II11I(0x16b,'c266')]||I1l111));}}async function liil1i(IIii1l){const il1i1=i1iIil,I1iIII={'nDdbW':function(II11ll,liiI1I){return II11ll(liiI1I);},'oFAMy':function(ililII,lI1II1){return ililII||lI1II1;},'CLrab':il1i1(0x195,'hGLP'),'YaRmn':il1i1(0x11d,'^VIJ'),'wTNqJ':il1i1(0x228,'4Wcb'),'sSiiK':'b1660','VTuYP':il1i1(0x10a,'IY3M'),'yszcz':il1i1(0x1c0,'xJk^'),'wTYAW':il1i1(0x227,'Qt4K'),'SmiCw':il1i1(0x219,'inJk'),'XHdoX':'application/json,\x20text/plain,\x20*/*','lYfRN':il1i1(0x1d7,'KEuz'),'gFyzc':il1i1(0x14f,'4Wcb'),'qFDvH':il1i1(0x1fc,'rx@4'),'QBDjm':il1i1(0x211,'VgdZ'),'AeTjJ':il1i1(0x106,'InUl'),'cUJLt':il1i1(0x127,'qwbw'),'rAbFi':il1i1(0x152,'n]bS'),'SOucG':function(i1ilII,iIIii1){return i1ilII===iIIii1;},'gkHuv':il1i1(0x1d2,'Rbo['),'hhaLe':'Content-Type','Aesue':function(IllIi1,lilIII){return IllIi1<lilIII;},'hfAQR':il1i1(0x1a6,'InUl'),'lkqmH':'YNfjg','ifItj':function(Ii1ilI,II11i1,iliIil){return Ii1ilI(II11i1,iliIil);},'QFaRY':il1i1(0x1e4,'8FT)'),'CzCjD':function(iliIii,lill1i){return iliIii!==lill1i;},'JThaL':il1i1(0x168,'TOZ*'),'FxBsE':il1i1(0x1ff,'m#qx'),'IAqql':il1i1(0x21f,'EM9z'),'bwUJa':il1i1(0x22b,'R1Lb'),'tGbqi':il1i1(0x1c4,'InUl'),'PrnMS':function(il1li,iIIill){return il1li||iIIill;},'zhjed':function(iilii,Ill11i){return iilii!==Ill11i;},'hOuRq':'OYRcj','AirhE':il1i1(0x119,'lkQX'),'cnLNe':function(iilil,Ill11l){return iilil===Ill11l;}};if($[il1i1(0x11c,'2PcJ')]||$['outFlag'])return;let liiI11='',ililI1={},IIii1i=I1iIII[il1i1(0x19f,'inJk')],i1ili=null,Iiill1={};switch(IIii1l){case'party_invite':liiI11=il1i1(0x1e2,'m[]8'),ililI1='functionId=party_invite&appid=spring_h5&body={}';break;case il1i1(0x1d3,'$6A!'):Iiill1={'appId':I1iIII[il1i1(0x14e,'rjaU')],'functionId':I1iIII['VTuYP'],'appid':I1iIII['yszcz'],'clientVersion':I1iIII['wTYAW'],'client':I1iIII[il1i1(0x1b1,'btZC')],'body':{'inviteCode':$['inviteCode']||'','areaInfo':'','unpl':''},'version':il1i1(0x1ec,'inJk'),'ua':$['UA'],'t':!![]},i1ili=await II1iI[il1i1(0x11e,'iD&$')](Iiill1),liiI11=il1i1(0x150,'hGLP'),ililI1=''+i1ili[il1i1(0x180,'m#qx')];break;default:console['log'](il1i1(0x161,'K*ZC')+IIii1l);return;}const I1iII1={'url':liiI11,'headers':{'Accept':I1iIII[il1i1(0x225,'iD&$')],'Accept-Encoding':I1iIII[il1i1(0x220,'qwbw')],'Accept-Language':'zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,en-GB;q=0.6','Connection':I1iIII[il1i1(0x14b,'Qt4K')],'Content-Type':I1iIII[il1i1(0x167,'Rbo[')],'Cookie':lIli1l,'Origin':I1iIII[il1i1(0x160,'n]bS')],'Referer':I1iIII[il1i1(0x14d,'lkQX')],'Sec-Fetch-Dest':I1iIII[il1i1(0x137,'VR&p')],'Sec-Fetch-Mode':I1iIII['rAbFi'],'Sec-Fetch-Site':il1i1(0x1a2,'VgdZ'),'User-Agent':$['UA']},'body':ililI1,'timeout':0x7530};I1iIII[il1i1(0x15a,'Qt4K')](IIii1i,I1iIII[il1i1(0x116,'m[]8')])&&(delete I1iII1[il1i1(0x188,'P%bu')],delete I1iII1[il1i1(0x1f8,'inJk')][I1iIII[il1i1(0x166,'Rbo[')]]);const lilII1=0x1;let iill1=0x0,iii1l1=null,IIliIl=![];while(I1iIII[il1i1(0x181,'6fL[')](iill1,lilII1)){iill1>0x0&&(I1iIII[il1i1(0x202,'0lov')](I1iIII[il1i1(0x230,'rx@4')],I1iIII['lkqmH'])?(illIl1='❌\x20'+l1llII+il1i1(0x1cc,'c266')+IilIll[il1i1(0x177,'lkQX')],lI11Ii[il1i1(0x165,'EM9z')](il1i1(0x108,'QG5t')+Iiill+'\x20=>\x20'+I1iIII[il1i1(0x142,'rx@4')](l11i1i,I1iIII['oFAMy'](lI11I1,I1iIII[il1i1(0x192,'QG5t')]))),l1il11++):await $[il1i1(0x216,'rx@4')](0x3e8));const {err:il1ll,res:i1ilIi,data:lill1l}=await I1iIII['ifItj'](lI1lil,I1iII1,IIii1i);if(il1ll){if(typeof il1ll===I1iIII['QFaRY']&&il1ll[il1i1(0x22a,'jGf(')](il1i1(0x222,'jGf(')))iii1l1=IIii1l+il1i1(0x15d,'VgdZ');else{const i1iiI=i1ilIi?.[il1i1(0x13c,'T6pK')];if(i1iiI){if(il1i1(0x1fe,'iD&$')==='WYbhj'){if([0x193,0x1ed][il1i1(0x215,'QG5t')](i1iiI))I1iIII[il1i1(0x223,'$6A!')](I1iIII[il1i1(0x19a,'0lov')],il1i1(0x1bb,'^VIJ'))?(iii1l1=IIii1l+il1i1(0x1aa,'n]bS')+i1iiI+'）',IIliIl=!![]):ll1lI=l1iii+il1i1(0x10b,'VR&p')+IIlli+'）';else[0x190,0x194][il1i1(0x1da,'8FT)')](i1iiI)?I1iIII[il1i1(0x1cb,'qwbw')]('kTQgJ','dHvvx')?(I1i11l[il1i1(0x165,'EM9z')]('❌\x20'+llIlii[il1i1(0x18e,'uZOP')]),llIlil[il1i1(0x1c8,'P%bu')][il1i1(0x175,'8FT)')](IIlil[il1i1(0x11b,'rjaU')])):iii1l1=IIii1l+il1i1(0x135,'2!lN')+i1iiI+'）':iii1l1=IIii1l+il1i1(0x1d8,'BxO)')+i1iiI+'）';}else iliIIi[il1i1(0x1e5,'IY3M')](ill11I[il1i1(0x1dd,'NjBQ')]),Iliiil[il1i1(0x177,'lkQX')][il1i1(0x159,'rx@4')](li1Il[il1i1(0x11b,'rjaU')]);}else'Ehtvc'===I1iIII[il1i1(0x212,'iD&$')]?(I1ilIl=I11iII+'\x20请求失败，IP被限制（Response\x20code\x20'+I1ilIi+'）',IiiiI=!![]):iii1l1=IIii1l+il1i1(0x114,'n]bS')+(il1ll[il1i1(0x1fb,'qwbw')]||il1ll);}iill1++;}else{const Iil1i1=ii1ill[il1i1(0x1e9,'BxO)')](i1ilIi),IIii11=![];if(IIii11){if(I1iIII[il1i1(0x17e,'inJk')](I1iIII[il1i1(0x20a,'KEuz')],I1iIII[il1i1(0x218,'iD&$')]))IlI1i1[il1i1(0x163,'8FT)')]('❌\x20'+l1lIl1['bizMsg']),IiiIlI[il1i1(0x18b,'2PcJ')][il1i1(0x132,'btZC')](Iilli1[il1i1(0x1b8,'InUl')]);else{const Ii1il1=il1i1(0x1df,'BxO)')['split']('|');let iii1ll=0x0;while(!![]){switch(Ii1il1[iii1ll++]){case'0':console[il1i1(0x118,'n]bS')](I1iIII[il1i1(0x12c,'n]bS')]);continue;case'1':console[il1i1(0x176,'P%bu')]('🔧\x20'+IIii1l+'\x20响应Cookie\x20=>\x20'+I1iIII['PrnMS'](Iil1i1,'无')+'\x0a');continue;case'2':console['log'](I1iIII['tGbqi']);continue;case'3':console[il1i1(0x176,'P%bu')](il1i1(0x1b5,'NjBQ')+IIii1l+'\x20请求参数');continue;case'4':console[il1i1(0x1c2,'NjBQ')]('🔧\x20'+IIii1l+'\x20响应Body\x20=>\x20'+(lill1l||'无')+'\x0a');continue;case'5':console[il1i1(0x165,'EM9z')](I1iII1);continue;}break;}}}try{if(I1iIII['zhjed'](I1iIII['hOuRq'],I1iIII[il1i1(0x193,'s($W')])){const IIliI1=JSON[il1i1(0x1bf,'n]bS')](lill1l);I1iIII[il1i1(0x10e,'VgdZ')](ii1ili,IIii1l,IIliI1);break;}else{const IliIIl=I1iIII['YaRmn'];return{'err':IliIIl,'res':null,'data':null};}}catch(I1il1l){iii1l1='❌\x20'+IIii1l+il1i1(0x16c,'VR&p')+I1il1l[il1i1(0x16f,'EM9z')],console[il1i1(0x16d,'VR&p')](il1i1(0x112,'xJk^')+IIii1l+'\x20=>\x20'+I1iIII[il1i1(0x184,'TOZ*')](String,I1iIII[il1i1(0x138,'X4u]')](lill1l,il1i1(0x1bc,'8FT)')))),iill1++;}IIliIl=![];}}iill1>=lilII1&&(console[il1i1(0x1ad,'m[]8')](iii1l1),IIliIl&&(I1iIII[il1i1(0x120,'K*ZC')]('cuyvQ',il1i1(0x15f,'AUrb'))?($['outFlag']=!![],$['message']&&(I1iIII[il1i1(0x1ee,'0lov')](il1i1(0x10d,'BxO)'),il1i1(0x226,'2PcJ'))?$['message']['fix'](iii1l1):(I1iIiI[il1i1(0x145,'Rbo[')](li1I1[il1i1(0x123,'n]bS')]),i1ilil['message']['fix'](lilIii['bizMsg'])))):I1iIII['nDdbW'](lI1liI,{'err':i1i1Ii,'res':lllii,'data':iI11Ii})));}async function lI1lil(iiliI,Ill11I=i1iIil(0x1a0,'iD&$')){const lIIiIi=i1iIil,I1il1i={'VnJYL':function(IliIIi,lI1l1i){return IliIIi(lI1l1i);},'URLmr':function(i1iil,llI11l){return i1iil!==llI11l;},'WWCKF':lIIiIi(0x1a8,'4Wcb'),'KrYMx':function(I1llIl,i1iii){return I1llIl(i1iii);},'iXGbj':lIIiIi(0x1c5,'V8sN'),'vpSlh':function(I1llIi,IIii1I){return I1llIi===IIii1I;},'tyrPM':lIIiIi(0x139,'4Wcb'),'qHdwx':lIIiIi(0x18a,'6fL['),'CnApc':function(llI11i,i1iIi1){return llI11i===i1iIi1;},'VCOOo':'QCgdk'};if(Ill11I===I1il1i['iXGbj'])return new Promise(async l1l1il=>{const liI1iI=lIIiIi;$[liI1iI(0x1a5,'X4u]')](iiliI,(I11i1I,iliIi1,l1l1ii)=>{const iI1Il1=liI1iI;I1il1i[iI1Il1(0x17a,'Rbo[')](l1l1il,{'err':I11i1I,'res':iliIi1,'data':l1l1ii});});});else{if(I1il1i['vpSlh'](Ill11I,I1il1i['tyrPM'])){if(I1il1i[lIIiIi(0x1a7,'2PcJ')](I1il1i[lIIiIi(0x1ce,'BxO)')],lIIiIi(0x15b,'Rbo[')))IIli1I[lIIiIi(0x194,'lkQX')]('❌\x20未能正确处理\x20'+I1i11I+lIIiIi(0x128,'T6pK')+(llIliI['message']||I1l1I1));else return new Promise(async Ii1iii=>{const i1iIl1=lIIiIi;$[i1iIl1(0x10f,'8FT)')](iiliI,(iIIilI,il1l1,Ii1iil)=>{const i1lli1=i1iIl1;if(I1il1i[i1lli1(0x11f,'KEuz')](I1il1i[i1lli1(0x1f1,'s($W')],I1il1i[i1lli1(0x13d,'AUrb')])){const iili1=I1iIl1?.['data'];if(iili1[i1lli1(0x1d9,'c266')]===0x0&&iili1[i1lli1(0x111,'IY3M')])i1ll[i1lli1(0x1af,'6fL[')]=iili1[i1lli1(0x149,'lkQX')][i1lli1(0x169,'rx@4')],i1l1lI[i1lli1(0x20d,'uZOP')](i1lli1(0x22e,'T6pK')+i1iliI['inviteCode']);else iili1[i1lli1(0x1db,'btZC')]?(I1iIii[i1lli1(0x109,'^VIJ')](iili1['bizMsg']),IllII1['message'][i1lli1(0x1fa,'X4u]')](iili1['bizMsg'])):I1iIil[i1lli1(0x20c,'VgdZ')]('❓'+lI1Iil+'\x20'+lilIiI['stringify'](i1l1I));}else Ii1iii({'err':iIIilI,'res':il1l1,'data':Ii1iil});});});}else{if(I1il1i[lIIiIi(0x196,'Qt4K')](I1il1i['VCOOo'],I1il1i[lIIiIi(0x18f,'inJk')])){const II11ii='不支持的请求方法';return{'err':II11ii,'res':null,'data':null};}else return new iI1llI(async II11il=>{const IIlII=lIIiIi,iIIil1={'BNulG':function(IlllII,I1il1I){const llIlII=iii1II;return I1il1i[llIlII(0x19e,'bVK9')](IlllII,I1il1I);}};l1llIi[IIlII(0x1c3,'$Css')](II1llI,(II111,lI1l1I,lill11)=>{const lIIiII=IIlII;iIIil1[lIIiII(0x1f0,'iD&$')](II11il,{'err':II111,'res':lI1l1I,'data':lill11});});});}}}var version_ = 'jsjiami.com.v7';
// prettier-ignore
function Env(t, e) { "undefined" != typeof process && JSON.stringify(process.env).indexOf("GITHUB") > -1 && process.exit(0); class s { constructor(t) { this.env = t } send(t, e = "GET") { t = "string" == typeof t ? { url: t } : t; let s = this.get; return "POST" === e && (s = this.post), new Promise((e, i) => { s.call(this, t, (t, s, r) => { t ? i(t) : e(s) }) }) } get(t) { return this.send.call(this.env, t) } post(t) { return this.send.call(this.env, t, "POST") } } return new class { constructor(t, e) { this.name = t, this.http = new s(this), this.data = null, this.dataFile = "box.dat", this.logs = [], this.isMute = !1, this.isNeedRewrite = !1, this.logSeparator = "\n", this.startTime = (new Date).getTime(), Object.assign(this, e), this.log("", `🔔${this.name}, 开始!`) } isNode() { return "undefined" != typeof module && !!module.exports } isQuanX() { return "undefined" != typeof $task } isSurge() { return "undefined" != typeof $httpClient && "undefined" == typeof $loon } isLoon() { return "undefined" != typeof $loon } toObj(t, e = null) { try { return JSON.parse(t) } catch { return e } } toStr(t, e = null) { try { return JSON.stringify(t) } catch { return e } } getjson(t, e) { let s = e; const i = this.getdata(t); if (i) try { s = JSON.parse(this.getdata(t)) } catch { } return s } setjson(t, e) { try { return this.setdata(JSON.stringify(t), e) } catch { return !1 } } getScript(t) { return new Promise(e => { this.get({ url: t }, (t, s, i) => e(i)) }) } runScript(t, e) { return new Promise(s => { let i = this.getdata("@chavy_boxjs_userCfgs.httpapi"); i = i ? i.replace(/\n/g, "").trim() : i; let r = this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout"); r = r ? 1 * r : 20, r = e && e.timeout ? e.timeout : r; const [o, h] = i.split("@"), n = { url: `http://${h}/v1/scripting/evaluate`, body: { script_text: t, mock_type: "cron", timeout: r }, headers: { "X-Key": o, Accept: "*/*" } }; this.post(n, (t, e, i) => s(i)) }).catch(t => this.logErr(t)) } loaddata() { if (!this.isNode()) return {}; { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e); if (!s && !i) return {}; { const i = s ? t : e; try { return JSON.parse(this.fs.readFileSync(i)) } catch (t) { return {} } } } } writedata() { if (this.isNode()) { this.fs = this.fs ? this.fs : require("fs"), this.path = this.path ? this.path : require("path"); const t = this.path.resolve(this.dataFile), e = this.path.resolve(process.cwd(), this.dataFile), s = this.fs.existsSync(t), i = !s && this.fs.existsSync(e), r = JSON.stringify(this.data); s ? this.fs.writeFileSync(t, r) : i ? this.fs.writeFileSync(e, r) : this.fs.writeFileSync(t, r) } } lodash_get(t, e, s) { const i = e.replace(/\[(\d+)\]/g, ".$1").split("."); let r = t; for (const t of i) if (r = Object(r)[t], void 0 === r) return s; return r } lodash_set(t, e, s) { return Object(t) !== t ? t : (Array.isArray(e) || (e = e.toString().match(/[^.[\]]+/g) || []), e.slice(0, -1).reduce((t, s, i) => Object(t[s]) === t[s] ? t[s] : t[s] = Math.abs(e[i + 1]) >> 0 == +e[i + 1] ? [] : {}, t)[e[e.length - 1]] = s, t) } getdata(t) { let e = this.getval(t); if (/^@/.test(t)) { const [, s, i] = /^@(.*?)\.(.*?)$/.exec(t), r = s ? this.getval(s) : ""; if (r) try { const t = JSON.parse(r); e = t ? this.lodash_get(t, i, "") : e } catch (t) { e = "" } } return e } setdata(t, e) { let s = !1; if (/^@/.test(e)) { const [, i, r] = /^@(.*?)\.(.*?)$/.exec(e), o = this.getval(i), h = i ? "null" === o ? null : o || "{}" : "{}"; try { const e = JSON.parse(h); this.lodash_set(e, r, t), s = this.setval(JSON.stringify(e), i) } catch (e) { const o = {}; this.lodash_set(o, r, t), s = this.setval(JSON.stringify(o), i) } } else s = this.setval(t, e); return s } getval(t) { return this.isSurge() || this.isLoon() ? $persistentStore.read(t) : this.isQuanX() ? $prefs.valueForKey(t) : this.isNode() ? (this.data = this.loaddata(), this.data[t]) : this.data && this.data[t] || null } setval(t, e) { return this.isSurge() || this.isLoon() ? $persistentStore.write(t, e) : this.isQuanX() ? $prefs.setValueForKey(t, e) : this.isNode() ? (this.data = this.loaddata(), this.data[e] = t, this.writedata(), !0) : this.data && this.data[e] || null } initGotEnv(t) { this.got = this.got ? this.got : require("got"), this.cktough = this.cktough ? this.cktough : require("tough-cookie"), this.ckjar = this.ckjar ? this.ckjar : new this.cktough.CookieJar, t && (t.headers = t.headers ? t.headers : {}, void 0 === t.headers.Cookie && void 0 === t.cookieJar && (t.cookieJar = this.ckjar)) } get(t, e = (() => { })) { t.headers && (delete t.headers["Content-Type"], delete t.headers["Content-Length"]), this.isSurge() || this.isLoon() ? (this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.get(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) })) : this.isQuanX() ? (this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t))) : this.isNode() && (this.initGotEnv(t), this.got(t).on("redirect", (t, e) => { try { if (t.headers["set-cookie"]) { const s = t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString(); s && this.ckjar.setCookieSync(s, null), e.cookieJar = this.ckjar } } catch (t) { this.logErr(t) } }).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) })) } post(t, e = (() => { })) { if (t.body && t.headers && !t.headers["Content-Type"] && (t.headers["Content-Type"] = "application/x-www-form-urlencoded"), t.headers && delete t.headers["Content-Length"], this.isSurge() || this.isLoon()) this.isSurge() && this.isNeedRewrite && (t.headers = t.headers || {}, Object.assign(t.headers, { "X-Surge-Skip-Scripting": !1 })), $httpClient.post(t, (t, s, i) => { !t && s && (s.body = i, s.statusCode = s.status), e(t, s, i) }); else if (this.isQuanX()) t.method = "POST", this.isNeedRewrite && (t.opts = t.opts || {}, Object.assign(t.opts, { hints: !1 })), $task.fetch(t).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => e(t)); else if (this.isNode()) { this.initGotEnv(t); const { url: s, ...i } = t; this.got.post(s, i).then(t => { const { statusCode: s, statusCode: i, headers: r, body: o } = t; e(null, { status: s, statusCode: i, headers: r, body: o }, o) }, t => { const { message: s, response: i } = t; e(s, i, i && i.body) }) } } time(t, e = null) { const s = e ? new Date(e) : new Date; let i = { "M+": s.getMonth() + 1, "d+": s.getDate(), "H+": s.getHours(), "m+": s.getMinutes(), "s+": s.getSeconds(), "q+": Math.floor((s.getMonth() + 3) / 3), S: s.getMilliseconds() }; /(y+)/.test(t) && (t = t.replace(RegExp.$1, (s.getFullYear() + "").substr(4 - RegExp.$1.length))); for (let e in i) new RegExp("(" + e + ")").test(t) && (t = t.replace(RegExp.$1, 1 == RegExp.$1.length ? i[e] : ("00" + i[e]).substr(("" + i[e]).length))); return t } msg(e = t, s = "", i = "", r) { const o = t => { if (!t) return t; if ("string" == typeof t) return this.isLoon() ? t : this.isQuanX() ? { "open-url": t } : this.isSurge() ? { url: t } : void 0; if ("object" == typeof t) { if (this.isLoon()) { let e = t.openUrl || t.url || t["open-url"], s = t.mediaUrl || t["media-url"]; return { openUrl: e, mediaUrl: s } } if (this.isQuanX()) { let e = t["open-url"] || t.url || t.openUrl, s = t["media-url"] || t.mediaUrl; return { "open-url": e, "media-url": s } } if (this.isSurge()) { let e = t.url || t.openUrl || t["open-url"]; return { url: e } } } }; if (this.isMute || (this.isSurge() || this.isLoon() ? $notification.post(e, s, i, o(r)) : this.isQuanX() && $notify(e, s, i, o(r))), !this.isMuteLog) { let t = ["", "==============📣系统通知📣=============="]; t.push(e), s && t.push(s), i && t.push(i), console.log(t.join("\n")), this.logs = this.logs.concat(t) } } log(...t) { t.length > 0 && (this.logs = [...this.logs, ...t]), console.log(t.join(this.logSeparator)) } logErr(t, e) { const s = !this.isSurge() && !this.isQuanX() && !this.isLoon(); s ? this.log("", `❗️${this.name}, 错误!`, t.stack) : this.log("", `❗️${this.name}, 错误!`, t) } wait(t) { return new Promise(e => setTimeout(e, t)) } done(t = {}) { const e = (new Date).getTime(), s = (e - this.startTime) / 1e3; this.log("", `🔔${this.name}, 结束! 🕛 ${s} 秒`), this.log(), (this.isSurge() || this.isQuanX() || this.isLoon()) && $done(t) } }(t, e) }
